<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>ENG ZOMBIE Quiz</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background-color: #222;
      color: white;
      margin: 0;
      padding: 20px;
    }
    .zombie {
      font-size: 50px;
      position: absolute;
      top: 100px;
      transition: left 0.1s linear;
    }
    .player {
      font-size: 40px;
      position: absolute;
      top: 100px;
      right: 0;
    }
    #gameArea {
      position: relative;
      height: 300px;
      border: 2px solid #444;
      margin-bottom: 20px;
    }
    .choice {
      margin: 10px;
      padding: 10px 20px;
      background: #444;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 18px;
    }
    .choice:hover {
      background: #666;
    }
    #timeBarContainer {
      width: 100%;
      height: 20px;
      background: #555;
      border-radius: 10px;
      margin-top: 10px;
      overflow: hidden;
    }
    #timeBar {
      height: 100%;
      width: 100%;
      background: limegreen;
      transition: width 1s linear, background 0.5s ease;
    }
    #startScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #startScreen button {
      padding: 15px 30px;
      font-size: 20px;
      cursor: pointer;
      background: limegreen;
      border: none;
      color: white;
    }
  </style>
</head>
<body>
<div id="startScreen">
  <h1>ENG ZOMBIE</h1>
  <p>‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡∏≠‡∏°‡∏ö‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡∏Ñ‡∏∏‡∏ì!</p>
  <button id="startButton">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
</div>
<h1>ENG ZOMBIE</h1>
<div id="gameArea">
  <div id="zombie" class="zombie" style="left: 0;">üßü</div>
  <div id="player" class="player">üôÇ</div>
</div>
<p id="question">Loading...</p>
<div id="choicesContainer"></div>
<p id="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: 0</p>
<p id="mistake">‚ùåÔ∏è ‡∏ú‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å: 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
<p id="timer">‚è±Ô∏è ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</p>
<div id="timeBarContainer">
  <div id="timeBar"></div>
</div>
<audio id="soundCorrect" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
<audio id="soundWrong" src="https://www.soundjay.com/buttons/sounds/button-16.mp3"></audio>
<audio id="bgMusic" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>
<audio id="zombieGroan" src="https://cdn.pixabay.com/download/audio/2021/09/04/audio_d195b61814.mp3" loop></audio>
<script>
const allQuestions = [
  { word: "apple", choices: ["‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•", "‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå", "‡∏™‡∏∏‡∏ô‡∏±‡∏Ç", "‡∏ö‡πâ‡∏≤‡∏ô"], correct: 0 },
  { word: "run", choices: ["‡∏ß‡∏¥‡πà‡∏á", "‡πÄ‡∏î‡∏¥‡∏ô", "‡∏ô‡∏±‡πà‡∏á", "‡∏Å‡∏¥‡∏ô"], correct: 0 },
  { word: "blue", choices: ["‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô", "‡πÅ‡∏î‡∏á", "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß", "‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á"], correct: 0 },
  { word: "book", choices: ["‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠", "‡πÇ‡∏ï‡πä‡∏∞", "‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ", "‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤"], correct: 0 },
  { word: "benevolent", choices: ["‡πÉ‡∏à‡∏î‡∏µ", "‡πÇ‡∏´‡∏î‡∏£‡πâ‡∏≤‡∏¢", "‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡∏µ‡∏¢‡∏à", "‡πÄ‡∏à‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏´‡πå"], correct: 0 },
  { word: "lucid", choices: ["‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô", "‡∏™‡∏±‡∏ö‡∏™‡∏ô", "‡∏á‡πà‡∏ß‡∏á", "‡∏ù‡∏±‡∏ô"], correct: 0 },
  { word: "meticulous", choices: ["‡∏û‡∏¥‡∏ñ‡∏µ‡∏û‡∏¥‡∏ñ‡∏±‡∏ô", "‡∏•‡∏ß‡∏Å‡πÜ", "‡πÄ‡∏£‡πá‡∏ß", "‡∏™‡∏ö‡∏≤‡∏¢‡πÜ"], correct: 0 },
  { word: "obsolete", choices: ["‡∏•‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏¢", "‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢", "‡πÉ‡∏´‡∏°‡πà", "‡πÅ‡∏û‡∏á"], correct: 0 },
  { word: "plausible", choices: ["‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ", "‡πÄ‡∏´‡∏•‡∏ß‡πÑ‡∏´‡∏•", "‡∏¢‡∏≤‡∏Å‡∏°‡∏≤‡∏Å", "‡∏á‡πà‡∏≤‡∏¢‡∏î‡∏≤‡∏¢"], correct: 0 },
  { word: "hostile", choices: ["‡πÄ‡∏õ‡πá‡∏ô‡∏®‡∏±‡∏ï‡∏£‡∏π", "‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£", "‡πÉ‡∏à‡∏î‡∏µ", "‡∏Ç‡∏µ‡πâ‡πÄ‡∏•‡πà‡∏ô"], correct: 0 }
];

let score = 0;
let zombieLeft = 0;
let currentQuestion = 0;
let timeLeft = 10;
let timerInterval;
let zombieInterval;
let mistakesLeft = 1;
const totalQuestions = 10;

window.onload = () => {
  document.getElementById("startButton").addEventListener("click", startGame);
};

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function startGame() {
  document.getElementById("startScreen").style.display = "none";
  document.getElementById("bgMusic").play();
  document.getElementById("zombieGroan").play();
  score = 0;
  zombieLeft = 0;
  currentQuestion = 0;
  timeLeft = 10;
  mistakesLeft = 1;
  showQuestion();
}

function setEmotion(type) {
  const emoji = {
    normal: "üßü",
    happy: "üòÑ",
    sad: "üò¢",
    shocked: "‚ùåÔ∏è"
  };
  document.getElementById("zombie").textContent = emoji[type] || "üßü";
}

function playSound(id) {
  const sound = document.getElementById(id);
  if (sound) {
    sound.currentTime = 0;
    sound.play();
  }
}

function updateTimeBar() {
  const bar = document.getElementById("timeBar");
  const percent = (timeLeft / 10) * 100;
  bar.style.width = percent + "%";
  bar.style.background = timeLeft <= 3 ? "red" : timeLeft <= 6 ? "orange" : "limegreen";
}

function showQuestion() {
  if (currentQuestion >= totalQuestions) {
    setEmotion('happy');
    alert("‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏£‡∏ö 10 ‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß! üéâ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: " + score);
    location.reload();
    return;
  }

  const q = allQuestions[currentQuestion];
  const shuffled = shuffle([...q.choices]);
  const correctAnswer = q.choices[q.correct];

  document.getElementById("question").textContent = `‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "${q.word}" ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?`;
  const choicesContainer = document.getElementById("choicesContainer");
  choicesContainer.innerHTML = "";

  shuffled.forEach((choice) => {
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.textContent = choice;
    btn.onclick = () => checkAnswer(choice === correctAnswer);
    choicesContainer.appendChild(btn);
  });

  timeLeft = 10;
  updateTimeBar();
  document.getElementById("timer").textContent = `‚è±Ô∏è ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: ${timeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
  clearInterval(timerInterval);
  clearInterval(zombieInterval);
  timerInterval = setInterval(updateTimer, 1000);
  moveZombieSmooth(10);
}

function updateTimer() {
  timeLeft--;
  updateTimeBar();
  document.getElementById("timer").textContent = `‚è±Ô∏è ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: ${timeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
  if (timeLeft <= 0) {
    clearInterval(timerInterval);
    clearInterval(zombieInterval);
    handleWrong("‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!");
  }
}

function moveZombieSmooth(duration) {
  const zombie = document.getElementById("zombie");
  const player = document.getElementById("player");
  const gameArea = document.getElementById("gameArea");
  const playerLeft = player.offsetLeft;
  const zombieWidth = zombie.offsetWidth;
  const maxLeft = playerLeft - zombieWidth;
  const fps = 60;
  const totalFrames = duration * fps;
  const distancePerFrame = maxLeft / totalFrames;

  zombieLeft = 0;
  zombie.style.left = "0px";

  zombieInterval = setInterval(() => {
    zombieLeft += distancePerFrame;
    if (zombieLeft >= maxLeft) {
      clearInterval(timerInterval);
      clearInterval(zombieInterval);
      alert("‡∏ã‡∏≠‡∏°‡∏ö‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß! üò±");
      location.reload();
    } else {
      zombie.style.left = zombieLeft + "px";
    }
  }, 1000 / fps);
}

function handleWrong(msg) {
  playSound("soundWrong");
  setEmotion("shocked");
  mistakesLeft--;
  document.getElementById("mistake").textContent = `‚ùåÔ∏è ‡∏ú‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å: ${mistakesLeft} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`;

  if (mistakesLeft <= 0) {
    alert("‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î! ‡∏ã‡∏≠‡∏°‡∏ö‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß! üò±");
    location.reload();
  } else {
    alert(msg);
    showQuestion();
  }
}

function checkAnswer(isCorrect) {
  clearInterval(timerInterval);
  clearInterval(zombieInterval);
  if (isCorrect) {
    playSound("soundCorrect");
    score += 10;
    zombieLeft = 0;
    document.getElementById("zombie").style.left = "0px";
    setEmotion("happy");
    document.getElementById("score").textContent = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${score}`;
    currentQuestion++;
    showQuestion();
  } else {
    handleWrong("‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î!");
  }
}
</script>
</body>
</html>
